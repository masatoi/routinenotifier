# 家庭内生活習慣改善通知システム MVP要件定義書 (CLI版)

## 1. はじめに

### 1.1. プロジェクトの目的

本プロジェクトは、設定ファイルに基づき、GCPのText-to-Speech (TTS) APIを利用してタスクを音声で通知する、実用最小限のコマンドラインツールを構築することを目的とする。

### 1.2. MVPのスコープ

MVPでは、ユーザーがローカルマシン上で設定ファイル（例：JSON形式）を直接編集し、そのスケジュールに従って常駐プログラムが自動で音声通知を行うというコア機能に絞る。Web UIやデータベースはスコープ外とする。

## 2. システム概要

### 2.1. システム構成図（CLI版）

```

[ユーザー] --(ファイルを編集)--\> [設定ファイル (schedule.json)]
|
| (起動時に読み込み)
V
[常駐CLIツール (ローカルマシン)] --+------\> [GCP TTS API] (音声合成)
|
V
[スピーカー] (音声出力)

````

### 2.2. 利用技術（想定）

* **ツール開発言語**: Python

* **音声合成**: Google Cloud Text-to-Speech API

* **設定**: JSON形式のファイル

* **実行環境**: ローカルマシン (Windows, macOS, Linux)

### 2.3. 開発ツールチェーン

本ツールの開発においては、コードの品質、保守性、開発効率を向上させるため、以下のモダンなPythonツールチェーンを採用する。

| **カテゴリ** | **ツール** | **役割** | 
| **CLIフレームワーク** | `Typer` | コマンドライン引数の処理、ヘルプ生成を担う。 | 
| **データバリデーション** | `pydantic` | 設定ファイル(JSON)の読み込みと厳密な検証を行う。 | 
| **依存関係/環境管理** | `Poetry` | ライブラリのバージョン管理と仮想環境を統一的に管理する。 | 
| **フォーマッター** | `black` | コードスタイルを自動で統一し、レビューの負担を軽減する。 | 
| **リンター** | `Ruff` | コードの静的解析を行い、バグの可能性がある箇所や非効率な記述を検出する。 | 
| **型チェック** | `mypy` | 静的な型チェックを行い、型に起因するエラーを未然に防ぐ。 | 
| **テストフレームワーク** | `pytest` | 機能が正しく動作することを保証するためのテストを記述・実行する。 | 
| **ワークフロー自動化** | `pre-commit` | git commit前にフォーマットやリントを自動実行し、品質を担保する。 | 

## 3. 機能要件

### 3.1. 設定ファイル管理機能【必須】

ユーザーがスケジュールをJSONファイルで直接定義できる機能。

* **3.1.1. JSONによるタスク設定**

  * ユーザーは、以下のような構造のJSONファイルを手動で編集してタスクを設定する。

    ```
    {
      "schedules": [
        {
          "name": "起床",
          "time": "07:00",
          "days": ["mon", "tue", "wed", "thu", "fri", "sat", "sun"],
          "message": "おはようございます。起きる時間です。"
        },
        {
          "name": "終業",
          "time": "19:00",
          "days": ["mon", "tue", "wed", "thu", "fri"],
          "message": "業務終了の時間です。お疲れ様でした。"
        }
      ]
    }
    
    ```
